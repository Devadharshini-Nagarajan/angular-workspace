<div>
  <div class="row">
    <div class="col-md-6">
      <mat-form-field>
        <mat-label>Month and Year</mat-label>
        <input
          matInput
          [min]="minDate"
          [max]="maxDate"
          [matDatepicker]="dp"
          [formControl]="date"
        />
        <mat-hint>MM/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="dp"></mat-datepicker-toggle>
        <mat-datepicker
          #dp
          startView="multi-year"
          (monthSelected)="setMonthAndYear($event, dp)"
          panelClass="example-month-picker"
        >
        </mat-datepicker>
      </mat-form-field>
    </div>
    <div class="col-md-6">
      <button mat-flat-button color="primary" (click)="onGenerateBudget()">
        Go
      </button>
    </div>
  </div>

  @if(showBudgetHint()) {
  <div class="budget-hint">
    ðŸ’¡ Looks like your category limits and savings together are a bit higher
    than your income. You might want to adjust them for better planning and
    smoother usage of the budget tool.
  </div>
  } @if(currbudget()) {
  <div>
    <mat-card appearance="outlined" class="my-5">
      <mat-card-header>
        <mat-card-title>Monthly Budget</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="budgetForm" class="mt-3">
          <div class="row">
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Income</mat-label>
              <input matInput type="number" formControlName="income" />
            </mat-form-field>
          </div>
          <div class="row">
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Target Savings</mat-label>
              <input matInput type="number" formControlName="targetSavings" />
            </mat-form-field>
          </div>
          <div class="row">
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Notes</mat-label>
              <input matInput rows="4" formControlName="note" />
            </mat-form-field>
          </div>
          <div class="row d-flex justify-content-end">
            <button
              mat-flat-button
              class="w-auto"
              color="primary"
              (click)="onSaveBudget()"
              [disabled]="budgetForm.invalid"
            >
              Save Budget
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>

    <app-budget-category></app-budget-category>
  </div>
  } @else {
  <div class="mt-5">Please select Year and Month to see the budget!</div>
  }
</div>
