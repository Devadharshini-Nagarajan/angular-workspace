<div class="auth-shell">
  <div class="auth-card-wrap">
    <mat-card class="auth-card" appearance="outlined">
      <mat-card-header class="auth-header">
        <div class="auth-badge" aria-hidden="true">
          <mat-icon>person_add</mat-icon>
        </div>
        <div>
          <mat-card-title class="auth-title">Create Account</mat-card-title>
          <div class="auth-subtitle">Set up your FinBuddy profile in a minute.</div>
        </div>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="form" class="auth-form">
          @if (apiError) {
            <div class="api-error">
              <mat-icon aria-hidden="true">error_outline</mat-icon>
              <span>{{ apiError }}</span>
            </div>
          }

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" autocomplete="email" />
            @if (form.get('email')?.invalid && form.get('email')?.hasError('required')) {
              <mat-error>Email is required</mat-error>
            }
            @if (form.get('email')?.invalid && form.get('email')?.hasError('email')) {
              <mat-error>Email is invalid</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Username</mat-label>
            <input matInput formControlName="username" autocomplete="username" />
            @if (form.get('username')?.invalid && form.get('username')?.hasError('required')) {
              <mat-error>Username is required</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Password</mat-label>
            <input
              matInput
              type="password"
              formControlName="password"
              autocomplete="new-password"
            />
            @if (form.get('password')?.invalid && form.get('password')?.hasError('required')) {
              <mat-error>Password is required</mat-error>
            }
            @if (form.get('password')?.invalid && form.get('password')?.hasError('minlength')) {
              <mat-error>Password must be at least 6 characters</mat-error>
            }
          </mat-form-field>

          <button
            mat-flat-button
            color="primary"
            type="submit"
            class="submit-btn"
            (click)="onSubmit()"
            [disabled]="form.invalid"
          >
            Create account
          </button>

          <div class="auth-footer">
            <span>Already have an account?</span>
            <a class="auth-link" [routerLink]="'/auth/signin'">Sign in</a>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
